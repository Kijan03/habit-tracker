<!DOCTYPE html>
<html lang="ko" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="매일의 작은 성공을 기록하며 꾸준한 성장을 만들어가는 미니멀 해빗 트래커입니다. 당신의 목표 달성을 응원합니다.">
    <meta name="google-adsense-account" content="ca-pub-1671769231692668">
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1671769231692668"
     crossorigin="anonymous"></script>
    <title>Habit Tracker - 어제보다 더 나은 나를 만드는 시간</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary-color: #10b981;
            --primary-hover: #059669;
        }
        body {
            font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
            background-color: var(--bg-color, #f8fafc);
            transition: background-color 0.3s ease;
            word-break: keep-all; /* 한국어 줄바꿈 가독성 개선 */
        }
        .card {
            background-color: var(--card-bg-color, #ffffff);
            border: 1px solid rgba(0,0,0,0.05);
        }
        .text-main {
            color: var(--text-color, #1e293b);
            line-height: 1.6;
        }
        .text-secondary {
            color: var(--text-secondary-color, #64748b);
            line-height: 1.7;
        }
        .progress-bar-fill {
            background: linear-gradient(90deg, #34d399, #10b981);
        }
        .button-accent {
             background-color: var(--accent-color, #10b981);
        }
        .button-accent:hover {
            background-color: var(--accent-hover-color, #059669);
        }
        /* 스크롤바 커스텀 */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        .back-to-top {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            display: none;
            z-index: 50;
        }
    </style>
</head>
<body class="text-main min-h-screen flex flex-col">

    <!-- 상단 내비게이션 -->
    <nav class="sticky top-0 z-40 bg-white/80 backdrop-blur-md border-b border-gray-200">
        <div class="container mx-auto max-w-5xl px-4 h-16 flex items-center justify-between">
            <a href="#" class="text-xl font-bold text-green-600 flex items-center gap-2">
                <span class="text-2xl">🌱</span> Habit Tracker
            </a>
            <div class="hidden md:flex gap-8 text-sm font-medium text-secondary">
                <a href="#habit-app" class="hover:text-green-600 transition-colors">트래커</a>
                <a href="#tips" class="hover:text-green-600 transition-colors">습관 전략</a>
                <a href="#habit-science" class="hover:text-green-600 transition-colors">습관의 과학</a>
                <a href="#recommended-books" class="hover:text-green-600 transition-colors">추천 도서</a>
                <a href="#contact" class="hover:text-green-600 transition-colors">문의하기</a>
            </div>
            <button id="mobile-menu-btn" class="md:hidden text-2xl">☰</button>
        </div>
    </nav>

    <!-- 모바일 메뉴 (기본 숨김) -->
    <div id="mobile-menu" class="fixed inset-0 z-50 bg-white hidden flex-col p-6 space-y-4">
        <div class="flex justify-between items-center mb-4">
            <span class="text-xl font-bold text-green-600">Menu</span>
            <button id="close-mobile-menu" class="text-3xl">&times;</button>
        </div>
        <a href="#habit-app" class="text-lg font-medium border-b py-2">트래커</a>
        <a href="#tips" class="text-lg font-medium border-b py-2">습관 전략</a>
        <a href="#habit-science" class="text-lg font-medium border-b py-2">습관의 과학</a>
        <a href="#recommended-books" class="text-lg font-medium border-b py-2">추천 도서</a>
        <a href="#contact" class="text-lg font-medium border-b py-2">문의하기</a>
    </div>

    <div class="container mx-auto max-w-2xl p-4 md:p-6 flex-grow">
        
        <!-- 상단 광고 영역 -->
        <div class="my-4 text-center">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-1671769231692668"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <header class="text-center my-8">
            <h1 id="today-date" class="text-xl font-semibold text-secondary"></h1>
            <p id="motivational-quote" class="text-2xl md:text-3xl font-bold mt-2 text-main"></p>
        </header>

        <main id="habit-app" class="card shadow-lg rounded-2xl p-6 space-y-6">
            <div class="progress-section">
                <div class="flex justify-between items-center mb-1">
                    <span class="text-sm font-medium text-secondary">오늘의 달성률</span>
                    <span id="progress-percentage" class="text-sm font-medium text-main">0%</span>
                </div>
                <div class="w-full progress-bar-bg rounded-full h-2.5">
                    <div id="progress-bar" class="progress-bar-fill h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
                </div>
            </div>

            <form id="habit-form" class="flex gap-3">
                <input type="text" id="habit-input" placeholder="새로운 습관 추가..." class="flex-grow bg-input border-2 border-transparent rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent text-main">
                <button type="submit" class="button-accent text-white font-bold py-3 px-6 rounded-lg transition-transform transform hover:scale-105">추가</button>
            </form>

            <ul id="habit-list" class="space-y-3"></ul>
        </main>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
            <div class="card shadow-lg rounded-2xl p-4">
                <h3 class="font-bold text-center mb-3 text-main">테마 색상 변경</h3>
                <div id="theme-switcher" class="flex flex-wrap justify-center gap-3">
                    <button data-color="#f0f2f5" class="w-8 h-8 rounded-full bg-[#f0f2f5] border-2 border-gray-300" title="기본"></button>
                    <button data-color="#1f2937" class="w-8 h-8 rounded-full bg-[#1f2937] border-2" title="다크"></button>
                    <button data-color="#fefce8" class="w-8 h-8 rounded-full bg-[#fefce8] border-2" title="크림"></button>
                    <button data-color="#e0e7ff" class="w-8 h-8 rounded-full bg-[#e0e7ff] border-2" title="인디고"></button>
                    <button data-color="#d1fae5" class="w-8 h-8 rounded-full bg-[#d1fae5] border-2" title="에메랄드"></button>
                    <button data-color="#ffedd5" class="w-8 h-8 rounded-full bg-[#ffedd5] border-2" title="피치"></button>
                    <button data-color="#fce7f3" class="w-8 h-8 rounded-full bg-[#fce7f3] border-2" title="로즈"></button>
                    <button data-color="#ecfeff" class="w-8 h-8 rounded-full bg-[#ecfeff] border-2" title="시안"></button>
                </div>
            </div>
            <div class="card shadow-lg rounded-2xl p-4 flex flex-col items-center justify-center space-y-3">
                 <button id="how-to-use-btn" class="button-accent text-white font-bold py-3 px-6 rounded-lg w-full">💡 사용 방법 보기</button>
                 <button id="about-btn" class="button-accent text-white font-bold py-3 px-6 rounded-lg w-full">ℹ️ 서비스 소개</button>
                 <button id="privacy-btn" class="button-accent text-white font-bold py-3 px-6 rounded-lg w-full">🔒 개인정보처리방침</button>
            </div>
        </div>

        <!-- 콘텐츠 섹션 1: 전략 -->
        <section id="tips" class="card shadow-lg rounded-2xl p-6 md:p-8">
            <h2 class="text-2xl font-bold text-center mb-6 text-main underline decoration-green-400 decoration-4 underline-offset-8">성공적인 습관 형성을 위한 5가지 전략</h2>
            <div class="text-secondary space-y-6 prose max-w-none">
                <p>새로운 습관을 만드는 것은 단순히 '열심히 해야지'라는 다짐만으로는 부족합니다. 우리의 뇌가 새로운 행동에 저항하지 않고 자연스럽게 받아들이도록 만드는 과학적인 방법들이 있습니다. 아래 5가지 전략을 통해 당신의 목표를 현실로 만들어보세요.</p>
                
                <h3 class="font-bold text-main">1. 아주 작은 단위로 시작하세요 (2분 규칙)</h3>
                <p>제임스 클리어의 저서 '아주 작은 습관의 힘'에서 강조하는 핵심 전략입니다. '매일 책 읽기'가 목표라면 '매일 딱 한 페이지만 읽기'로, '매일 운동하기'가 목표라면 '운동복으로 갈아입기'로 시작하는 것입니다. 새로운 습관을 시작하는 데 드는 저항감을 없애는 것이 핵심입니다.</p>

                <h3 class="font-bold text-main">2. 이미 가진 습관에 새로운 습관을 붙이세요 (습관 쌓기)</h3>
                <p>새로운 습관을 위한 시간과 장소를 따로 마련하는 것은 부담스러울 수 있습니다. 대신, 이미 매일 하고 있는 기존 습관에 새로운 습관을 짝지어보세요. 예를 들어, "아침에 커피를 내린 후, 1분간 명상하기"와 같은 방식입니다.</p>

                <h3 class="font-bold text-main">3. 눈에 보이게 만들어 즉각적인 보상을 제공하세요</h3>
                <p>인간의 뇌는 즉각적인 보상에 강하게 반응합니다. 이 해빗 트래커에 체크하며 연속 달성(Streak) 숫자를 높여가는 것이 바로 시각적인 보상의 한 예입니다.</p>
                
                <h3 class="font-bold text-main">4. 환경을 디자인하여 유혹을 제거하세요</h3>
                <p>'의지력'에만 의존하는 것은 실패로 가는 지름길입니다. 건강한 식습관을 원한다면, 부엌에서 과자나 탄산음료를 모두 치워버리세요. 환경 설정이 의지력보다 훨씬 효과적입니다.</p>

                <h3 class="font-bold text-main">5. 하루 놓쳤다고 해서 모든 것을 망치지 마세요</h3>
                <p>완벽주의는 습관 형성의 가장 큰 적입니다. 어쩌다 하루 이틀 습관을 놓치는 것은 지극히 자연스러운 일입니다. 중요한 것은 '연속으로 두 번은 놓치지 않는다'는 마음가짐입니다.</p>
            </div>
        </section>

        <!-- 콘텐츠 섹션 2: 습관의 과학 (새로 추가) -->
        <section id="habit-science" class="card shadow-lg rounded-2xl p-6 md:p-8">
            <h2 class="text-2xl font-bold text-center mb-6 text-main underline decoration-green-400 decoration-4 underline-offset-8">습관의 과학: 뇌는 어떻게 변화하는가</h2>
            <div class="text-secondary space-y-6 prose max-w-none">
                <p>습관은 우리 뇌의 '기저핵(Basal Ganglia)'이라는 부위에서 담당합니다. 우리가 어떤 행동을 반복할 때, 뇌는 에너지를 절약하기 위해 그 과정을 자동화하며, 이것이 바로 습관이 형성되는 과정입니다.</p>
                
                <h3 class="font-bold text-main">신경 가소성과 습관</h3>
                <p>뇌는 평생에 걸쳐 변화할 수 있는 '신경 가소성'을 가지고 있습니다. 새로운 습관을 실천할 때마다 뇌세포 사이의 연결이 강화되며, 마치 숲속에 새로운 길을 내는 것과 같습니다. 처음에는 길이 좁고 거칠지만, 반복해서 걸을수록 길은 넓고 탄탄해집니다.</p>

                <h3 class="font-bold text-main">도파민 루프의 활용</h3>
                <p>습관이 성공적으로 안착하려면 '보상'이 필수적입니다. 행동을 완료했을 때 분비되는 도파민은 뇌에게 "이 행동은 가치가 있으니 기억해둬!"라고 속삭입니다. 트래커의 체크 표시 하나가 당신의 뇌를 긍정적으로 자극하는 이유입니다.</p>
            </div>
        </section>

        <!-- 콘텐츠 섹션 3: 추천 도서 -->
        <section id="recommended-books" class="card shadow-lg rounded-2xl p-6 md:p-8">
            <h2 class="text-2xl font-bold text-center mb-6 text-main underline decoration-green-400 decoration-4 underline-offset-8">습관 형성을 위한 추천 도서</h2>
            <div class="text-secondary space-y-8">
                <div class="book-recommendation border-l-4 border-green-400 pl-4">
                    <h3 class="font-bold text-main mb-2 text-lg">1. 아주 작은 습관의 힘 (Atomic Habits) - 제임스 클리어</h3>
                    <p>습관 형성에 관한 최고의 교과서입니다. '2분 규칙', '습관 쌓기' 등 누구나 쉽게 따라 할 수 있는 구체적이고 과학적인 방법론을 제시합니다.</p>
                </div>
                <div class="book-recommendation border-l-4 border-green-400 pl-4">
                    <h3 class="font-bold text-main mb-2 text-lg">2. 습관의 힘 (The Power of Habit) - 찰스 두히그</h3>
                    <p>'신호-반복행동-보상'으로 이어지는 습관의 고리를 이해하고, 이를 통해 개인과 조직의 변화를 이끌어내는 통찰을 제공합니다.</p>
                </div>
            </div>
        </section>

        <!-- 중단 광고 영역 -->
        <div class="my-10 text-center">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-format="fluid"
                 data-ad-layout-key="-fb+5w+4e-db+86"
                 data-ad-client="ca-pub-1671769231692668"
                 data-ad-slot="1234567890"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <section id="contact" class="card shadow-lg rounded-2xl p-6 md:p-8 text-center">
            <h2 class="text-2xl font-bold mb-4 text-main">Contact & Feedback</h2>
            <p class="text-secondary">사용 중 불편한 점이나 제안하고 싶은 기능이 있다면 언제든 알려주세요. 여러분의 의견은 더 나은 서비스를 만드는 데 큰 힘이 됩니다.</p>
            <div class="mt-6 flex flex-col items-center gap-2">
                <p class="text-sm text-secondary">공식 문의 이메일</p>
                <a href="mailto:kijan03@gmail.com" class="text-xl font-bold text-green-600 hover:underline">kijan03@gmail.com</a>
            </div>
        </section>
    </div>

    <!-- 맨 위로 가기 버튼 -->
    <button id="back-to-top" class="back-to-top bg-green-600 text-white p-3 rounded-full shadow-2xl hover:bg-green-700 transition-all transform hover:scale-110">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="Wait 5M5 10l7-7m0 0l7 7m-7-7v18" />
        </svg>
    </button>

    <!-- 하단 광고 영역 -->
    <div class="container mx-auto max-w-2xl px-4 md:px-6 mb-8">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-1671769231692668"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>
    
    <footer class="bg-white border-t border-gray-200 pt-12 pb-8">
        <div class="container mx-auto max-w-5xl px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-12 mb-12">
                <div class="col-span-1">
                    <h4 class="font-bold text-lg mb-4 text-main">Habit Tracker</h4>
                    <p class="text-secondary text-sm leading-relaxed">매일의 작은 성공을 기록하며 꾸준한 성장을 만들어가는 미니멀 해빗 트래커입니다. 당신의 목표 달성을 진심으로 응원합니다.</p>
                </div>
                <div class="col-span-1">
                    <h4 class="font-bold text-lg mb-4 text-main">Quick Links</h4>
                    <ul class="text-secondary text-sm space-y-2">
                        <li><a href="#tips" class="hover:text-green-600">습관 전략</a></li>
                        <li><a href="#habit-science" class="hover:text-green-600">습관의 과학</a></li>
                        <li><a href="#recommended-books" class="hover:text-green-600">추천 도서</a></li>
                    </ul>
                </div>
                <div class="col-span-1">
                    <h4 class="font-bold text-lg mb-4 text-main">Legal</h4>
                    <ul class="text-secondary text-sm space-y-2">
                        <li><a href="#" onclick="openModal(elements.aboutModal); return false;" class="hover:text-green-600">서비스 소개</a></li>
                        <li><a href="#" onclick="openModal(elements.privacyModal); return false;" class="hover:text-green-600">개인정보처리방침</a></li>
                        <li><a href="mailto:kijan03@gmail.com" class="hover:text-green-600">이메일 문의</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-100 pt-8 flex flex-col md:flex-row justify-between items-center gap-4">
                <p class="text-xs text-gray-400">&copy; 2024 Habit Tracker. All Rights Reserved.</p>
                <div class="flex gap-4 text-xs text-gray-400">
                    <span>Designed for Growth</span>
                    <span>•</span>
                    <span>Powered by Consistency</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- 모달 영역 -->
    <div id="privacy-modal" class="fixed inset-0 bg-black bg-opacity-60 hidden items-center justify-center p-4 z-50">
        <div class="card rounded-2xl shadow-xl max-w-lg w-full p-6 relative overflow-y-auto max-h-[90vh]">
            <button class="modal-close-btn absolute top-4 right-4 text-2xl font-bold text-secondary hover:text-main">&times;</button>
            <h2 class="text-2xl font-bold text-center mb-4 text-main">개인정보처리방침</h2>
            <div class="text-secondary space-y-4 text-sm leading-relaxed">
                <p>본 사이트(이하 '서비스')는 사용자의 개인정보를 소중히 다루며, 관련 법령을 준수합니다. 본 방침은 서비스 이용 시 수집되는 정보와 그 보호 방식에 대해 설명합니다.</p>
                <h3 class="font-bold text-main border-b pb-1">1. 정보의 수집 및 활용</h3>
                <p>본 서비스는 사용자가 직접 입력하는 '습관 목록' 및 '테마 설정' 정보를 수집합니다. 이 데이터는 오직 사용자의 원활한 서비스 이용을 위해서만 활용됩니다.</p>
                <h3 class="font-bold text-main border-b pb-1">2. 데이터의 저장 (로컬 스토리지)</h3>
                <p>본 서비스는 별도의 서버를 운영하지 않습니다. 모든 데이터는 사용자의 브라우저 내 <strong class="text-main">localStorage</strong>에만 저장됩니다. 이는 데이터의 완전한 소유권이 사용자에게 있음을 의미하며, 브라우저 캐시 삭제 시 데이터가 소멸될 수 있음에 유의하시기 바랍니다.</p>
                <h3 class="font-bold text-main border-b pb-1">3. 제3자 광고 및 쿠키 정책</h3>
                <p>본 서비스는 구글(Google)에서 제공하는 AdSense 광고를 게재합니다. 구글은 사용자의 관심사를 분석하여 맞춤형 광고를 제공하기 위해 쿠키(Cookie)를 사용합니다. 사용자는 구글의 광고 설정 페이지에서 맞춤형 광고를 비활성화할 수 있습니다.</p>
                <h3 class="font-bold text-main border-b pb-1">4. 문의처</h3>
                <p>본 방침과 관련하여 궁금한 점이 있으시면 <a href="mailto:kijan03@gmail.com" class="text-green-600 font-bold underline">kijan03@gmail.com</a>으로 연락 주시기 바랍니다.</p>
            </div>
        </div>
    </div>

    <div id="about-modal" class="fixed inset-0 bg-black bg-opacity-60 hidden items-center justify-center p-4 z-50">
        <div class="card rounded-2xl shadow-xl max-w-lg w-full p-6 relative overflow-y-auto max-h-[90vh]">
            <button class="modal-close-btn absolute top-4 right-4 text-2xl font-bold text-secondary hover:text-main">&times;</button>
            <h2 class="text-2xl font-bold text-center mb-4 text-main">서비스 소개 (About Us)</h2>
            <div class="text-secondary space-y-4 leading-relaxed">
                <p><strong>🌱 Habit Tracker</strong>는 복잡하고 화려한 기능보다는 '매일의 실천'이라는 습관의 본질에 집중하는 미니멀리즘 도구입니다.</p>
                <p>우리는 누구나 더 나은 자신이 되고 싶어 하지만, 거창한 목표 앞에서 쉽게 좌절하곤 합니다. 본 서비스는 제임스 클리어의 '아주 작은 습관의 힘'에서 영감을 받아, 단 1%의 개선이라도 매일 지속할 수 있도록 돕기 위해 개발되었습니다.</p>
                <h3 class="font-bold text-main border-b pb-1">우리의 가치</h3>
                <ul class="list-disc pl-5 space-y-2 text-sm">
                    <li><strong>심플함:</strong> 불필요한 알림이나 광고 방해 없이 목표에만 집중합니다.</li>
                    <li><strong>지속가능성:</strong> 스트릭(Streak) 시스템을 통해 성취감을 시각화합니다.</li>
                    <li><strong>투명성:</strong> 사용자의 데이터는 오직 사용자의 기기에만 머뭅니다.</li>
                </ul>
                <p class="text-center mt-6 italic font-medium">"당신의 위대한 변화는 오늘 입력한 작은 습관에서 시작됩니다."</p>
            </div>
        </div>
    </div>
    
    <div id="how-to-use-modal" class="fixed inset-0 bg-black bg-opacity-60 hidden items-center justify-center p-4 z-50">
        <div class="card rounded-2xl shadow-xl max-w-lg w-full p-6 relative">
            <button class="modal-close-btn absolute top-4 right-4 text-2xl font-bold text-secondary hover:text-main">&times;</button>
            <h2 class="text-2xl font-bold text-center mb-4 text-main">해빗 트래커 사용 방법</h2>
            <div class="text-secondary space-y-3">
                <p><strong>✅ 습관 추가:</strong> 상단의 입력창에 새로운 습관을 입력하고 '추가' 버튼을 누르세요.</p>
                <p><strong>👆 습관 완료:</strong> 습관 목록의 체크박스를 클릭하여 완료 상태로 변경할 수 있습니다. 한 번 더 클릭하면 미완료 상태로 돌아갑니다.</p>
                <p><strong>🔥 연속 달성 (Streak):</strong> 습관을 연속으로 완료하면 불꽃 아이콘과 함께 숫자가 올라갑니다. 하루라도 놓치면 초기화되니 꾸준히 도전해보세요!</p>
                <p><strong>❌ 습관 삭제:</strong> 각 습관 항목의 오른쪽에 있는 '×' 버튼을 눌러 습관을 삭제할 수 있습니다.</p>
                <p><strong>🎨 테마 변경:</strong> 하단의 색상 팔레트 버튼을 클릭하여 원하는 테마로 변경할 수 있습니다. 당신만의 공간을 만들어보세요.</p>
            </div>
        </div>
    </div>
    
    <div id="celebration-modal" class="fixed inset-0 bg-black bg-opacity-60 hidden items-center justify-center p-4 z-50">
        <div class="card rounded-2xl shadow-xl max-w-lg w-full p-8 relative text-center">
            <button class="modal-close-btn absolute top-4 right-4 text-2xl font-bold text-secondary hover:text-main">&times;</button>
            <h2 class="text-3xl font-bold text-main mb-2">🎉 축하합니다! 🎉</h2>
            <p id="celebration-text" class="text-lg text-secondary mb-6"></p>
            <div class="flex gap-4">
                <button id="share-btn" class="flex-1 bg-blue-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-600">자랑하기</button>
                <button id="copy-btn" class="flex-1 bg-gray-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-gray-600">내용 복사</button>
            </div>
        </div>
    </div>


    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // DOM 요소
        const elements = {
            date: document.getElementById('today-date'),
            quote: document.getElementById('motivational-quote'),
            progressText: document.getElementById('progress-percentage'),
            progressBar: document.getElementById('progress-bar'),
            habitForm: document.getElementById('habit-form'),
            habitInput: document.getElementById('habit-input'),
            habitList: document.getElementById('habit-list'),
            themeSwitcher: document.getElementById('theme-switcher'),
            howToUseBtn: document.getElementById('how-to-use-btn'),
            howToUseModal: document.getElementById('how-to-use-modal'),
            celebrationModal: document.getElementById('celebration-modal'),
            celebrationText: document.getElementById('celebration-text'),
            shareBtn: document.getElementById('share-btn'),
            copyBtn: document.getElementById('copy-btn'),
            modalCloseBtns: document.querySelectorAll('.modal-close-btn'),
            aboutBtn: document.getElementById('about-btn'),
            aboutModal: document.getElementById('about-modal'),
            privacyBtn: document.getElementById('privacy-btn'),
            privacyModal: document.getElementById('privacy-modal')
        };

        const STORAGE_KEY_HABITS = 'habitsDataV4'; // 버전 업데이트
        const STORAGE_KEY_THEME = 'themeColorV1';
        const MILESTONES = [3, 7, 14, 30, 50, 100];
        
        let state = {
            habits: [],
            lastVisitDate: getISODateString(new Date())
        };

        const quotes = [
            "성공의 비결은 시작하는 것이다.", "오늘의 작은 실천이 내일의 큰 변화를 만든다.", "어제보다 나은 오늘을 만들자.", "꾸준함이 비범함을 만든다.", "가장 큰 위험은 아무 위험도 감수하지 않는 것이다."
        ];

        // --- 유틸리티 함수 ---
        function getISODateString(date) {
            return date.getFullYear() + '-' + ('0' + (date.getMonth() + 1)).slice(-2) + '-' + ('0' + date.getDate()).slice(-2);
        }

        // --- 상태 관리 ---
        const saveState = () => localStorage.setItem(STORAGE_KEY_HABITS, JSON.stringify(state));
        const loadState = () => JSON.parse(localStorage.getItem(STORAGE_KEY_HABITS));
        const saveTheme = (color) => localStorage.setItem(STORAGE_KEY_THEME, color);
        const loadTheme = () => localStorage.getItem(STORAGE_KEY_THEME);

        // --- 렌더링 및 UI 업데이트 ---
        function applyTheme(color) {
            const isDark = (color === '#1f2937');
            document.documentElement.style.setProperty('--bg-color', color);
            document.documentElement.style.setProperty('--card-bg-color', isDark ? '#2d3748' : '#ffffff');
            document.documentElement.style.setProperty('--text-color', isDark ? '#e2e8f0' : '#1f2937');
            document.documentElement.style.setProperty('--text-secondary-color', isDark ? '#a0aec0' : '#6b7280');
            document.documentElement.style.setProperty('--progress-bg-color', isDark ? '#4a5568' : '#e5e7eb');
            document.documentElement.style.setProperty('--input-bg-color', isDark ? '#4a5568' : '#f3f4f6');
        }

        const updateProgressBar = () => {
            const total = state.habits.length;
            const completed = state.habits.filter(h => h.completed).length;
            const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;
            elements.progressBar.style.width = `${percentage}%`;
            elements.progressText.textContent = `${percentage}%`;
        };
        
        const renderHabits = () => {
            elements.habitList.innerHTML = '';
            if (state.habits.length === 0) {
                elements.habitList.innerHTML = `<p class="text-center py-10 text-secondary">아직 등록된 습관이 없습니다.<br>오늘의 첫 번째 습관을 추가해보세요! 🌱</p>`;
            } else {
                state.habits.forEach((habit, index) => {
                    const isCompleted = habit.completed;
                    const li = document.createElement('li');
                    li.className = `habit-item group flex items-center p-4 rounded-xl transition-all duration-200 cursor-pointer ${isCompleted ? 'bg-green-50' : 'card hover:shadow-md hover:border-green-200'}`;
                    li.innerHTML = `
                        <div class="flex-grow flex items-center gap-4">
                            <div class="relative flex items-center justify-center">
                                <input type="checkbox" id="checkbox-${index}" ${isCompleted ? 'checked' : ''} class="peer w-6 h-6 rounded-full border-2 border-gray-300 text-green-500 focus:ring-0 cursor-pointer transition-all">
                                <div class="absolute pointer-events-none text-white opacity-0 peer-checked:opacity-100 transition-opacity">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                                    </svg>
                                </div>
                            </div>
                            <span class="flex-grow font-medium ${isCompleted ? 'line-through text-slate-400' : 'text-slate-700'}">${habit.name}</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="streak-text font-bold text-sm px-2 py-1 bg-orange-50 text-orange-500 rounded-full ${habit.streak > 0 ? 'opacity-100' : 'opacity-0'}">🔥 ${habit.streak}</span>
                            <button class="delete-btn opacity-0 group-hover:opacity-100 p-2 text-slate-300 hover:text-red-500 transition-all">&times;</button>
                        </div>
                    `;
                    
                    li.addEventListener('click', (e) => {
                        if (!e.target.closest('.delete-btn')) {
                            toggleHabit(index);
                        }
                    });

                    li.querySelector('.delete-btn').addEventListener('click', (e) => {
                        e.stopPropagation();
                        deleteHabit(index);
                    });
                    elements.habitList.appendChild(li);
                });
            }
            updateProgressBar();
        };

        // --- 스크롤 제어 ---
        const backToTopBtn = document.getElementById('back-to-top');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTopBtn.style.display = 'block';
            } else {
                backToTopBtn.style.display = 'none';
            }
        });
        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        function displayHeaderInfo() {
            const today = new Date();
            elements.date.textContent = today.toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric' });
            elements.quote.textContent = quotes[Math.floor(Math.random() * quotes.length)];
        }
        
        // --- 모달 로직 ---
        const openModal = (modal) => {
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        };
        const closeModal = (modal) => {
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        };

        const closeAllModals = () => {
            closeModal(elements.howToUseModal);
            closeModal(elements.celebrationModal);
            closeModal(elements.aboutModal);
            closeModal(elements.privacyModal);
        };
        
        // --- 축하 로직 ---
        function runConfetti() {
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.animationDelay = Math.random() * 2 + 's';
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 5000);
            }
        }
        
        function showCelebration(habit) {
            elements.celebrationText.textContent = `'${habit.name}' 습관을 ${habit.streak}일 연속으로 달성하셨어요!`;
            openModal(elements.celebrationModal);
            runConfetti();
        }

        // --- 핵심 로직 ---
        const addHabit = (name) => {
            if (name.trim() === '') return;
            state.habits.push({ name: name.trim(), completed: false, streak: 0, lastCompletedDate: null });
            saveState();
            renderHabits();
        };

        const toggleHabit = (index) => {
            const habit = state.habits[index];
            const today = getISODateString(new Date());
            const yesterday = getISODateString(new Date(Date.now() - 86400000));
            habit.completed = !habit.completed;

            if (habit.completed) {
                const previousStreak = habit.streak;
                habit.streak = habit.lastCompletedDate === yesterday ? habit.streak + 1 : 1;
                habit.lastCompletedDate = today;

                // 축하 이벤트 체크
                if (MILESTONES.includes(habit.streak) && habit.streak > previousStreak) {
                    showCelebration(habit);
                }
            } else {
                if (habit.lastCompletedDate === today) {
                    habit.streak--;
                    habit.lastCompletedDate = habit.streak > 0 ? yesterday : null;
                }
            }
            saveState();
            renderHabits();
        };

        const deleteHabit = (index) => {
            state.habits.splice(index, 1);
            saveState();
            renderHabits();
        };

        const initializeState = () => {
            const loaded = loadState();
            const today = getISODateString(new Date());
            const yesterday = getISODateString(new Date(Date.now() - 86400000));
            
            if (loaded) {
                state = loaded;
                if (state.lastVisitDate !== today) {
                    state.habits.forEach(habit => {
                        if (habit.completed && habit.lastCompletedDate !== today) {
                             // 이전 방문 시 체크된 항목 처리
                        } else if (!habit.completed && habit.lastCompletedDate !== yesterday) {
                            habit.streak = 0;
                        }
                        habit.completed = false;
                    });
                    state.lastVisitDate = today;
                }
            }
            saveState();
        };

        // --- 이벤트 리스너 ---
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const closeMobileMenuBtn = document.getElementById('close-mobile-menu');

        mobileMenuBtn.addEventListener('click', () => {
            mobileMenu.classList.remove('hidden');
            mobileMenu.classList.add('flex');
        });

        closeMobileMenuBtn.addEventListener('click', () => {
            mobileMenu.classList.add('hidden');
            mobileMenu.classList.remove('flex');
        });

        // 모바일 메뉴 링크 클릭 시 메뉴 닫기
        mobileMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
                mobileMenu.classList.remove('flex');
            });
        });

        elements.habitForm.addEventListener('submit', (e) => {
            e.preventDefault();
            addHabit(elements.habitInput.value);
            elements.habitInput.value = '';
        });

        elements.themeSwitcher.addEventListener('click', (e) => {
            if (e.target.tagName === 'BUTTON') {
                const color = e.target.dataset.color;
                applyTheme(color);
                saveTheme(color);
            }
        });
        
        elements.howToUseBtn.addEventListener('click', () => openModal(elements.howToUseModal));
        elements.aboutBtn.addEventListener('click', () => openModal(elements.aboutModal));
        elements.privacyBtn.addEventListener('click', () => openModal(elements.privacyModal));
        
        elements.modalCloseBtns.forEach(btn => {
            btn.addEventListener('click', closeAllModals);
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeAllModals();
            }
        });
        
        // 공유 및 복사 버튼 이벤트
        const getShareText = () => `🎉 '${state.habits.find(h => MILESTONES.includes(h.streak))?.name}' 습관을 ${state.habits.find(h => MILESTONES.includes(h.streak))?.streak}일 연속으로 달성했습니다! #해빗트래커`;

        elements.shareBtn.addEventListener('click', () => {
            const shareText = getShareText();
            if (navigator.share) {
                navigator.share({
                    title: '습관 달성!',
                    text: shareText,
                }).catch(console.error);
            } else {
                alert("이 브라우저에서는 공유하기가 지원되지 않습니다. '내용 복사'를 이용해주세요.");
            }
        });

        elements.copyBtn.addEventListener('click', () => {
            const shareText = getShareText();
            navigator.clipboard.writeText(shareText).then(() => {
                const originalText = elements.copyBtn.textContent;
                elements.copyBtn.textContent = '복사 완료!';
                setTimeout(() => {
                    elements.copyBtn.textContent = originalText;
                }, 2000);
            });
        });

        // --- 초기화 ---
        function init() {
            const savedTheme = loadTheme();
            if (savedTheme) {
                applyTheme(savedTheme);
            } else {
                applyTheme('#f0f2f5'); // 기본 테마
            }
            displayHeaderInfo();
            initializeState();
            renderHabits();
        }

        init();
    });
    </script>
</body>
</html>

